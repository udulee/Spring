<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order History</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/oder-history.css">
</head>
<body class="container-fluid px-4">

<!-- Navigation -->
<nav class="mt-3 mb-3">
    <a href="../index.html" class="btn btn-outline-primary btn-sm">Home</a>
    <a href="customer.html" class="btn btn-outline-secondary btn-sm">Customer</a>
    <a href="item.html" class="btn btn-outline-success btn-sm">Item</a>
    <a href="place-order.html" class="btn btn-outline-warning btn-sm">Place Order</a>
</nav>

<h1 class="page-title">Order History</h1>

<!-- Stats Cards -->
<div class="row mb-4" id="statsRow">
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card stat-blue">
            <div class="stat-icon"></div>
            <div class="stat-value" id="totalOrders">0</div>
            <div class="stat-label">Total Orders</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card stat-green">
            <div class="stat-icon"></div>
            <div class="stat-value" id="totalRevenue">Rs. 0</div>
            <div class="stat-label">Total Revenue</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card stat-orange">
            <div class="stat-icon"></div>
            <div class="stat-value" id="uniqueCustomers">0</div>
            <div class="stat-label">Unique Customers</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card stat-purple">
            <div class="stat-icon"></div>
            <div class="stat-value" id="avgOrderValue">Rs. 0</div>
            <div class="stat-label">Avg Order Value</div>
        </div>
    </div>
</div>

<!-- Search and Filter Bar -->
<div class="filter-bar mb-3">
    <div class="row g-2 align-items-end">
        <div class="col-md-4">
            <label class="form-label fw-semibold">Search Orders</label>
            <input type="text" class="form-control" id="searchInput"
                   placeholder="Search by Order ID, Customer, Item...">
        </div>
        <div class="col-md-3">
            <label class="form-label fw-semibold">Filter by Customer ID</label>
            <div class="input-group">
                <input type="text" class="form-control" id="customerFilter" placeholder="e.g. C001">
                <button class="btn btn-outline-secondary" onclick="filterByCustomer()">Filter</button>
            </div>
        </div>
        <div class="col-md-2">
            <label class="form-label fw-semibold">Sort by</label>
            <select class="form-select" id="sortSelect" onchange="sortOrders()">
                <option value="date-desc">Newest First</option>
                <option value="date-asc">Oldest First</option>
                <option value="total-desc">Highest Total</option>
                <option value="total-asc">Lowest Total</option>
            </select>
        </div>
        <div class="col-md-3 d-flex gap-2">
            <button class="btn btn-primary w-100" onclick="loadHistory()">Refresh</button>
            <button class="btn btn-outline-secondary w-100" onclick="clearFilters()">Clear</button>
        </div>
    </div>
</div>

<!-- History Table -->
<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Order ID</th>
            <th>Customer ID</th>
            <th>Item ID</th>
            <th>Item Name</th>
            <th>Qty</th>
            <th>Unit Price</th>
            <th>Total</th>
            <th>Order Date</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody id="historyTableBody">
        <tr>
            <td colspan="10" class="text-center text-muted py-4">
                <div class="spinner-border spinner-border-sm text-secondary me-2"></div>
                Loading order history...
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Pagination -->
<div class="d-flex justify-content-between align-items-center mt-3">
    <div id="recordCount" class="text-muted small"></div>
    <div id="pagination" class="d-flex gap-2"></div>
</div>

<script src="../js/jQuery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="../js/order-history.js"></script>

</body>
</html>