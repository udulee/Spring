<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History â€” POS System</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Your system CSS -->
    <link rel="stylesheet" href="../css/order-history.css">
</head>

<body class="container">

<!-- Navigation -->
<nav class="mt-3 mb-4 d-flex gap-2 flex-wrap">

    <a href="../index.html" class="btn btn-outline-primary btn-sm">
        <i class="fas fa-home me-1"></i> Home
    </a>

    <a href="item.html" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-box me-1"></i> Item
    </a>

    <a href="place-order.html" class="btn btn-outline-success btn-sm">
        <i class="fas fa-shopping-cart me-1"></i> Order
    </a>

    <a href="order_history.html" class="btn btn-primary btn-sm">
        <i class="fas fa-history me-1"></i> Order History
    </a>

</nav>


<!-- Header section -->
<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">

    <h1 class="page-title mb-0">
        <i class="fas fa-history me-2 text-primary"></i>
        Order History
    </h1>

    <button class="btn btn-primary btn-sm" onclick="loadHistory()">
        <i class="fas fa-sync-alt me-1"></i> Refresh Data
    </button>

</div>



<!-- Stats Cards -->
<div class="row mb-4">

    <div class="col-md-3 col-sm-6 mb-3">
        <div class="form-container text-center">
            <i class="fas fa-receipt text-primary mb-2"></i>
            <div class="h4 fw-bold text-primary" id="totalOrders">0</div>
            <div class="small text-muted">Total Orders</div>
        </div>
    </div>

    <div class="col-md-3 col-sm-6 mb-3">
        <div class="form-container text-center">
            <i class="fas fa-money-bill-wave text-success mb-2"></i>
            <div class="h4 fw-bold text-success" id="totalRevenue">Rs. 0</div>
            <div class="small text-muted">Total Revenue</div>
        </div>
    </div>

    <div class="col-md-3 col-sm-6 mb-3">
        <div class="form-container text-center">
            <i class="fas fa-users text-warning mb-2"></i>
            <div class="h4 fw-bold text-warning" id="uniqueCustomers">0</div>
            <div class="small text-muted">Unique Customers</div>
        </div>
    </div>

    <div class="col-md-3 col-sm-6 mb-3">
        <div class="form-container text-center">
            <i class="fas fa-chart-line text-info mb-2"></i>
            <div class="h4 fw-bold text-info" id="avgOrderValue">Rs. 0</div>
            <div class="small text-muted">Average Order Value</div>
        </div>
    </div>

</div>



<!-- Filter Section -->
<div class="form-container mb-4">

    <div class="row g-3 align-items-end">

        <div class="col-md-4">
            <label class="form-label">
                <i class="fas fa-search me-1"></i> Search Orders
            </label>

            <input type="text"
                   class="form-control"
                   id="searchInput"
                   placeholder="Search Order ID, Customer, Item...">
        </div>


        <div class="col-md-3">

            <label class="form-label">
                <i class="fas fa-user me-1"></i> Customer ID
            </label>

            <div class="input-group">

                <input type="text"
                       class="form-control"
                       id="customerFilter"
                       placeholder="Enter ID">

                <button class="btn btn-primary" onclick="filterByCustomer()">
                    Filter
                </button>

            </div>

        </div>


        <div class="col-md-2">

            <label class="form-label">
                <i class="fas fa-sort me-1"></i> Sort
            </label>

            <select class="form-select"
                    id="sortSelect"
                    onchange="sortOrders()">

                <option value="date-desc">Newest</option>
                <option value="date-asc">Oldest</option>
                <option value="total-desc">Highest</option>
                <option value="total-asc">Lowest</option>

            </select>

        </div>


        <div class="col-md-3 d-flex gap-2">

            <button class="btn btn-primary w-100" onclick="loadHistory()">
                <i class="fas fa-sync-alt me-1"></i> Refresh
            </button>

            <button class="btn btn-secondary w-100" onclick="clearFilters()">
                <i class="fas fa-times me-1"></i> Clear
            </button>

        </div>

    </div>

</div>



<!-- Table Card -->
<div class="form-container">

    <div class="table-responsive">

        <table class="table table-hover align-middle mb-0">

            <thead class="table-dark">

            <tr>
                <th>#</th>
                <th>Order ID</th>
                <th>Customer ID</th>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Total</th>
                <th>Date</th>
                <th>Status</th>
            </tr>

            </thead>

            <tbody id="historyTableBody">

            <tr>

                <td colspan="10" class="text-center text-muted py-4">

                    <div class="spinner-border spinner-border-sm me-2"></div>

                    Loading order history...

                </td>

            </tr>

            </tbody>

        </table>

    </div>

</div>



<!-- Pagination -->
<div class="d-flex justify-content-between align-items-center mt-3 mb-4">

    <div id="recordCount" class="small text-muted"></div>

    <div id="pagination" class="d-flex gap-2"></div>

</div>



<!-- Scripts -->
<script src="../js/jQuery.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script src="../js/order-history.js"></script>

</body>
</html>